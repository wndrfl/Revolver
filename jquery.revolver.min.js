(function(e){var t=function(t,n){var r=this;var i=e.extend({},e.fn.revolver.defaults,n);var s={activeClass:"revolver-slide-active",currSlide:1,inactiveClass:"revolver-slide-inactive",isAnimating:false,isPaused:false,prevSlide:null,reverseOnce:false,timeout:null,wrapperClass:"revolver-slide-wrapper"};var o=e(t);var u=[];o.children(i.childrenEls).each(function(){u.push(e(this).clone());e(this).remove()});var a='<div class="'+s.wrapperClass+'"></div>';o.prepend(a);var f=o.children("."+s.wrapperClass).first();e.each(u,function(e,t){f.append(u)});var l=f.children(i.childrenEls);var c=function(){if(!s.isPaused){r.startRevolver()}};var h=function(){v();p();d();i.afterLoad.call(this,s)};var p=function(){b("Setting up children");l.each(function(){var t=e(this);var n=t.css("position");if(n!="relative"&&n!="absolute"){t.css("position","absolute")}t.css({top:"0",left:"0"});if(t.index()>0){t.addClass(s.inactiveClass);if(i.hideInactiveSlides){t.css({opacity:0})}}else{t.addClass(s.activeClass)}})};var d=function(){b("Setting up controls");if(i.manualButton!==null){e(i.manualButton).click(function(t){t.preventDefault();var n=e(this).attr("data-slide")*1;if(n){y(n)}})}if(i.nextButton!==null){e(i.nextButton).click(function(e){e.preventDefault();if(!s.isAnimating){m()}})}if(i.prevButton!=null){e(i.prevButton).click(function(e){e.preventDefault();if(!s.isAnimating){g()}})}};var v=function(){b("Setting up parent");o.css({position:"relative"});if(i.cropSlideshow){o.css("overflow","hidden")}if(i.pauseOnHover){o.hover(function(){r.pauseRevolver()},function(){r.startRevolver()})}};var m=function(){nextSlide=s.currSlide>=l.length?1:s.currSlide+1;y(nextSlide)};var g=function(){prevSlide=s.currSlide<=0?l.length-1:s.currSlide-1;s.reverseOnce=true;y(prevSlide)};var y=function(e){b("Show slide "+e);r.stopRevolver();r.cleanupRevolver();s.isAnimating=true;s.prevSlide=s.currSlide;s.currSlide=e;if(s.currSlide!=s.prevSlide){i.beforeChange.call(this,s);if(i.transitionType=="fadeIn"){l.eq(s.prevSlide-1).removeClass(s.activeClass).addClass(s.inactiveClass).css({"z-index":99});var t={opacity:0,"z-index":"100"};if(i.transitionDir=="right"){t.left="+=50"}else if(i.transitionDir=="left"){t.left="-=50"}l.eq(s.currSlide-1).removeClass(s.inactiveClass).addClass(s.activeClass).css(t).animate({opacity:1,top:0,left:0},i.transitionDuration,function(){s.isAnimating=false;c();i.afterChange.call(this,s)})}else if(i.transitionType=="slide"){var n={};var o={opacity:1};var u={};if(!i.hideInactiveSlides){n.opacity=1}else{u.opacity=0}n.left="100%";o.left=0;u.left="-100%";if(i.transitionDir=="left"&&s.reverseOnce){n.left="100%";n.top=0;o.left=0;u.left="-100%";u.top=0}else if(i.transitionDir=="left"&&!s.reverseOnce||i.transitionDir=="right"&&s.reverseOnce){n.top=0;n.left="-100%";o.left=0;u.top=0;u.left="100%"}else if(i.transitionDir=="top"&&!s.reverseOnce||i.transitionDir=="bottom"&&s.reverseOnce){n.left=0;n.top="-100%";o.top=0;u.left=0;u.top="100%"}else if(i.transitionDir=="bottom"&&!s.reverseOnce||i.transitionDir=="top"&&s.reverseOnce){n.left=0;n.top="100%";o.top=0;u.left=0;u.top="-100%"}l.eq(s.prevSlide-1).removeClass(s.activeClass).addClass(s.inactiveClass);l.eq(s.currSlide-1).removeClass(s.inactiveClass).addClass(s.activeClass).css(n).animate(o,i.transitionDuration,function(){c();s.isAnimating=false;i.afterChange.call(this,s)});l.eq(s.prevSlide-1).animate(u,i.transitionDuration)}}else{s.isAnimating=false;c();i.afterChange.call(this,s)}s.reverseOnce=false};var b=function(e){if(i.debug){if(this.console&&typeof console.log!=="undefined"){console.log(e)}}};this.cleanupRevolver=function(){l.each(function(){if(e(this).hasClass(s.inactiveClass)){e(this).css({opacity:"0","z-index":"0"})}})};this.pauseRevolver=function(){b("Pause");r.stopRevolver();s.isPaused=true};this.startRevolver=function(){b("Start");s.isPaused=false;s.timeout=setTimeout(function(){m()},i.rotationDelay)};this.stopRevolver=function(){b("Stop");l.stop(true);clearTimeout(s.timeout)};h();if(i.autoplay){r.startRevolver()}};e.fn.revolver=function(n){return this.each(function(r,i){var s=e(this);if(s.data("revolver")){return s.data("revolver")}var o=new t(this,n);s.data("revolver",o)})};e.fn.revolver.defaults={autoplay:true,childrenEls:"div",cropSlideshow:true,debug:false,hideInactiveSlides:true,nextButton:null,manualButton:null,prevButton:null,pauseOnHover:true,rotationDelay:2e3,transitionDir:"none",transitionDuration:1e3,transitionType:"fadeIn",afterLoad:function(){},afterChange:function(){},beforeChange:function(){}}})(jQuery)